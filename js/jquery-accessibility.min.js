jQuery, jQuery.fn.santillanaAcessibilidade = function (o) { return o = $.extend({ nomeCookieFiltro: "BarraAcessibilidadeFiltro", nomeCookieZoom: "BarraAcessibilidadeZoom", caminhoCss: "css/accessibility", zoomEscala: !0, zoomMaximo: 8, zoomPorcentagem: 25, elementosMudancaFonte: "h1, h2, h3, h4, h5, h6, p, a, span, label, input, textarea, li, pre", excluirElementos: [".nofilter, img"], excluirElementosAP: ["img"] }, o), this.each(function () { var e = jQuery(this); $("#conteudo").length <= 0 && $('body .accessibility-bar ul:first-child li[role="menuitem"]:first-child').hide(), $("#menuPrincipal").length <= 0 && $('body .accessibility-bar ul:first-child li[role="menuitem"]:nth-child(2)').hide(), $("#txtBusca").length <= 0 && $('body .accessibility-bar ul:first-child li[role="menuitem"]:nth-child(3)').hide(), $("#rodape").length <= 0 && $('body .accessibility-bar ul:first-child li[role="menuitem"]:nth-child(4)').hide(); var a = !1; (navigator.userAgent.match(/Mozzila/) || navigator.userAgent.match(/Firefox/)) && (a = !0); var i = !1; ("Microsoft Internet Explorer" == navigator.appName || navigator.userAgent.match(/Trident/) || navigator.userAgent.match(/rv:11/) || void 0 !== $.browser && 1 == $.browser.msie) && (i = !0), o.excluirElementos.forEach(function (o, e) { $(o).addClass("noFilter") }), o.excluirElementosAP.forEach(function (o, e) { $(o).addClass("noFilterAP") }); var t = e.find("ul.pull-right li.contrast"), n = e.find("ul.pull-right li.closeContrast"), s = t.find("div.dautoniveis"), r = $(window).width(), l = e.find(".zoomIn"), c = e.find(".zoomOut"); o.tamanhoConteudo || (o.tamanhoConteudo = 960); var d = e.find(".container").width(); if (a && $(window).resize(function () { d = e.find(".container").width(), r = $(window).width(), z(o.nomeCookieZoom, 1), g() }), document.cookie.indexOf(o.nomeCookieFiltro) > 0 && "normal" != F(o.nomeCookieFiltro) && f(F(o.nomeCookieFiltro)), document.cookie.indexOf(o.nomeCookieZoom) < 0 && (o.zoomEscala ? z(o.nomeCookieZoom, 1) : z(o.nomeCookieZoom, 0)), document.cookie.indexOf(o.nomeCookieFiltro) < 0 && z(o.nomeCookieFiltro, "normal"), o.zoomEscala) (m = parseFloat(F(o.nomeCookieZoom))) < 1 && (z(o.nomeCookieZoom, 1), m = 1); else var m = parseFloat(F(o.nomeCookieZoom)); if (s.find("a").click(function (e) { var a = $(this).attr("data-nivel"); return z(o.nomeCookieFiltro, a, 0), f(a), $(window).width() <= 992 && s.removeClass("opened").addClass("closed"), !1 }), i) { var h = s.parent().find("a"); s.remove(), "amarelopreto" == F(o.nomeCookieFiltro) ? h.attr("data-nivel", "normal") : h.attr("data-nivel", "amarelopreto"), h.click(function (e) { var a = $(this), i = $(this).attr("data-nivel"); return z(o.nomeCookieFiltro, i, 0), f(i), "amarelopreto" == i ? a.attr("data-nivel", "normal") : a.attr("data-nivel", "amarelopreto"), !1 }) } function f(e) { switch (e) { case "normal": u(); break; case "altocontraste": u(), $("head").append('<link id="santAcess-altocontraste" rel="stylesheet"   href="' + o.caminhoCss + 'sa.altocontraste.css" />'); break; case "monocromatico": u(), $("head").append('<link id="santAcess-monocromatico" rel="stylesheet"   href="' + o.caminhoCss + 'sa.monocromatico.css" />'); break; case "cinzainvertida": u(), $("head").append('<link id="santAcess-cinzainvertida" rel="stylesheet"   href="' + o.caminhoCss + 'sa.cinzainvertida.css" />'); break; case "corinvertida": u(), $("head").append('<link id="santAcess-corinvertida" rel="stylesheet"   href="' + o.caminhoCss + 'sa.corinvertida.css" />'); break; case "amarelopreto": u(), $("head").append('<link id="santAcess-amarelopreto" rel="stylesheet"   href="' + o.caminhoCss + 'sa.amarelopreto.css" />') } } function u() { $('link[id^="santAcess-"]').remove() } function v(e, a) { a || (a = o.zoomPorcentagem), $(o.elementosMudancaFonte).each(function () { var o = $(this), i = o.attr("data-font"), t = o.attr("data-lheight"); if (0 == e) var n = i, s = t; else { var r = Math.floor(parseFloat(a) * e) / 100, l = parseFloat(1) + r; n = parseFloat(i) * l, s = parseFloat(t) * l } o.css({ "font-size": n + "px", "line-height": s + "px" }) }) } function p(o) { return "in" == o ? d * (m + .2) < r : "out" == o ? d - d / (m - .2) > 0 : void 0 } o.zoomEscala || $(o.elementosMudancaFonte).each(function () { var o = $(this), e = (e = o.css("font-size")).replace("px", "").trim(), a = (a = o.css("line-height")).replace("px", "").trim(); o.attr("data-font", e), o.attr("data-lheight", a) }); var C = parseFloat(F(o.nomeCookieZoom)), k = 100 * parseFloat(C); function b() { $("body").width("100%"), $(".container").outerWidth() > $(".container").outerWidth(!0) ? $("body").width(window.innerWidth) : $("body").width("100%"); var o = ($(document).width() - $("body").width()) / 2; window.scrollTo(o, $("body").offset().top) } function g() { 1 == p("out") ? (m -= .2, $("body").css({ transform: "scale(" + m + "," + m + ")", transformOrigin: "50% 0" })) : (m = 1, $("body").css({ transform: "scale(" + m + "," + m + ")", transformOrigin: "50% 0", "overflow-x": "auto" })), z(o.nomeCookieZoom, m) } l.click(function () { if (o.zoomEscala) a ? 1 == p("in") && (m += .2, $("body").css({ transform: "scale(" + m + "," + m + ")", transformOrigin: "50% 0", "overflow-x": "hidden" }), z(o.nomeCookieZoom, m)) : (C += .2, $("body").css("MozTransform", "scale(" + C + ")"), k += 20, $("body").css("zoom", " " + k + "%"), z(o.nomeCookieZoom, C), b()); else { var e = parseInt(F(o.nomeCookieZoom)) + 1; e < o.zoomMaximo + 1 && v(e), e <= o.zoomMaximo && z(o.nomeCookieZoom, e) } return !1 }), c.click(function () { if (o.zoomEscala) a ? m > 1 && g() : C > 1 && (C -= .2, $("body").css("MozTransform", "scale(" + C + ")"), k -= 20, $("body").css("zoom", " " + k + "%"), z(o.nomeCookieZoom, C), b()); else { var e = parseInt(F(o.nomeCookieZoom)) - 1; e >= 0 && (z(o.nomeCookieZoom, e), v(e)) } return !1 }); var y = F(o.nomeCookieZoom); if (o.zoomEscala) if (a) 1 == y ? $("body").css({ transform: "scale(" + y + "," + y + ")", transformOrigin: "50% 0", "overflow-x": "auto" }) : $("body").css({ transform: "scale(" + y + "," + y + ")", transformOrigin: "50% 0", "overflow-x": "hidden" }); else { var w = y; $("body").css("MozTransform", "scale(" + w + ")"); var x = 100 * parseFloat(y); $("body").css("zoom", " " + (.1 + x) - .1 + "%"), b() } else v(y); function z(o, e, a) { if (a || (a = 0), a) { var i = new Date; i.setTime(i.getTime() + 24 * a * 60 * 60 * 1e3); var t = "; expires=" + i.toGMTString() } else t = ""; document.cookie = o + "=" + e + t + "; path=/" } function F(o) { for (var e = o + "=", a = decodeURIComponent(document.cookie).split(";"), i = 0; i < a.length; i++) { for (var t = a[i]; " " == t.charAt(0);)t = t.substring(1); if (0 == t.indexOf(e)) return t.substring(e.length, t.length) } return "" } r > 992 ? (t.find("a").hasClass("contrasteOff") || t.find("a").hover(function () { t.find("div.dautoniveis").removeClass("closed").addClass("opened") }, function () { t.find("div.dautoniveis").removeClass("opened").addClass("closed") }).click(function () { s.hasClass("opened") ? s.removeClass("opened").addClass("closed") : s.removeClass("closed").addClass("opened") }), n.find("a").focusin(function () { s.removeClass("opened").addClass("closed") })) : t.find(" > a").on("click", function () { s.hasClass("closed") ? s.removeClass("closed").addClass("opened") : s.removeClass("opened").addClass("closed") }) }) };
